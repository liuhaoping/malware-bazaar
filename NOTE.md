## Downald malware samples 
```
# Option1 : download daily binary malware samples
$ wget https://datalake.abuse.ch/malware-bazaar/daily/2020-03-14.zip

# Option 2 : download by given a csv file that contains a sha1 field
$ ./download_files_by_sha1.sh malware_baazar.csv
```

# Generate lzjd and merge meta data
Merge lzjd with sha256, sha1, tlsh, signature, file_type, entropy into a csv file
```
$./gen_fzhash_signature.sh ~/mb2204/ mb2204.csv
```

## Malware  Bazaar API
https://bazaar.abuse.ch/api/
```
# https://bazaar.abuse.ch/api/#siginfo
wget --post-data "query=get_siginfo&signature=TrickBot&limit=5" https://mb-api.abuse.ch/api/v1/
```

## Filter out data
``
$csvcut -n mb2204.csv
  1: sha256_hash
  2: sha1_hash
  3: tlsh
  4: signature
  5: file_type
  6: lzjd

# Insert csv file into db
$csvsql --db sqlite:///mb2204.db --insert mb2204.csv

# Filter out data
$sql2csv --db sqlite:///mb2204.db --query "select a.* from mb20220419 a, (select signature, count(*) as cnt from mb2204 group by signature order by cnt desc limit 40) b where a.signature = b.signature and a.file_type != 'elf'" > mb2204-top40.csv

# List top values
$csvcut -c 4 mb2204-top40.csv | csvstat
  1. "signature"

        Type of data:          Text
        Contains null values:  False
        Unique values:         37
        Longest value:         14 characters
        Most common values:    Formbook (746x)
                               AgentTesla (713x)
                               Heodo (498x)
                               RedLineStealer (344x)
                               Loki (336x)

Row count: 4286

$csvcut -c 5 mb2204-top40.csv | csvstat
  1. "file_type"

        Type of data:          Text
        Contains null values:  False
        Unique values:         36
        Longest value:         7 characters
        Most common values:    exe (2861x)
                               dll (579x)
                               xlsx (298x)
                               zip (129x)
                               rar (60x)

Row count: 4286
```
